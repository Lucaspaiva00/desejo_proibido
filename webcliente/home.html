<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Feed</title>

    <link rel="stylesheet" href="css/dating.css" />
    <link rel="stylesheet" href="css/filtros.css" />
</head>

<body>
    <!-- TOPNAV -->
    <nav class="topnav" role="navigation" aria-label="Navega√ß√£o principal">
        <div class="brand">
            <div class="brand-badge">DP</div>
            <span class="brand-name">Desejo Proibido</span>
        </div>

        <!-- Links desktop -->
        <div class="navlinks navlinks-desktop" aria-label="Links do menu">
            <a href="home.html" class="active">Feed</a>
            <a href="perfil.html">Perfil</a>
            <a href="fotos.html">Fotos</a>
            <a href="matches.html">Matches</a>
            <a href="conversas.html">Chat</a>
        </div>

        <div class="spacer"></div>

        <!-- ‚úÖ FILTROS NO CABE√áALHO -->
        <div class="nav-filtros" aria-label="Filtros do feed">
            <!-- <div id="filtrosResumo" class="nav-chips" aria-label="Resumo dos filtros">
                <span class="fchip">Recentes</span>
                <span class="fchip muted">Sem filtros</span>
            </div> -->

            <button id="btnOpenFiltros" class="btn btn-ghost nav-filtros-btn" type="button" title="Abrir filtros">
                ‚öôÔ∏è <span class="nav-filtros-text">Filtros</span>
            </button>
        </div>

        <!-- Sair -->
        <button id="btnSair" class="btn btn-ghost">Sair</button>

        <!-- Hamb√∫rguer (mobile) -->
        <button class="nav-toggle" id="navToggle" aria-label="Abrir menu" aria-expanded="false"
            aria-controls="navDrawer">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <!-- Overlay + Drawer Mobile -->
    <div class="nav-overlay" id="navOverlay" aria-hidden="true"></div>

    <aside class="nav-drawer" id="navDrawer" aria-hidden="true">
        <div class="nav-drawer-head">
            <div class="brand">
                <div class="brand-badge">DP</div>
                <span class="brand-name">Desejo Proibido</span>
            </div>

            <button class="iconbtn" id="navClose" aria-label="Fechar menu">
                <span class="xicon"></span>
            </button>
        </div>

        <div class="nav-drawer-links">
            <a href="home.html" class="active">Feed</a>
            <a href="perfil.html">Perfil</a>
            <a href="fotos.html">Fotos</a>
            <a href="matches.html">Matches</a>
            <a href="conversas.html">Chat</a>
        </div>

        <div class="nav-drawer-foot">
            <button id="btnSairMobile" class="btn btn-ghost w100">Sair</button>
        </div>
    </aside>

    <div class="wrap">
        <div class="feed-stage">
            <!-- Card Tinder -->
            <div class="tcard panel" id="tcard">
                <div id="card" class="tcard-inner"></div>

                <div class="tactions" aria-label="A√ß√µes do feed">
                    <button id="btnBloquear" class="tbtn tbtn-danger" title="Bloquear" aria-label="Bloquear">‚úñ</button>
                    <button id="btnPular" class="tbtn tbtn-ghost" title="Pular" aria-label="Pular">‚ü≤</button>
                    <button id="btnDenunciar" class="tbtn tbtn-warn" title="Denunciar" aria-label="Denunciar">‚öë</button>
                    <button id="btnCurtir" class="tbtn tbtn-like" title="Curtir" aria-label="Curtir">‚ù§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚úÖ MODAL FILTROS -->
    <div class="fmodal-overlay" id="filtrosOverlay" aria-hidden="true">
        <div class="fmodal" role="dialog" aria-modal="true" aria-label="Filtros do feed">
            <div class="fmodal-head">
                <div>
                    <div class="fmodal-title">Filtros</div>
                    <div class="fmodal-sub muted">Refine por cidade, idade, g√™nero e op√ß√µes avan√ßadas.</div>
                </div>

                <button class="iconbtn" id="btnCloseFiltros" aria-label="Fechar filtros">
                    <span class="xicon"></span>
                </button>
            </div>

            <div class="fmodal-body">
                <div class="filtros-grid">
                    <div class="col-12">
                        <label class="flabel">Busca</label>
                        <input id="fQ" class="finput" placeholder="Buscar por nome ou bio..." />
                    </div>

                    <div class="col-6">
                        <label class="flabel">Cidade</label>
                        <input id="fCidade" class="finput" placeholder="Ex: Pedreira" />
                    </div>

                    <div class="col-6">
                        <label class="flabel">Estado</label>
                        <input id="fEstado" class="finput" placeholder="Ex: SP" />
                    </div>

                    <div class="col-3">
                        <label class="flabel">Idade m√≠n.</label>
                        <input id="fIdadeMin" class="finput" type="number" min="18" max="99" placeholder="18" />
                    </div>

                    <div class="col-3">
                        <label class="flabel">Idade m√°x.</label>
                        <input id="fIdadeMax" class="finput" type="number" min="18" max="99" placeholder="99" />
                    </div>

                    <div class="col-6">
                        <label class="flabel">G√™nero</label>
                        <select id="fGenero" class="fselect">
                            <option value="QUALQUER">Qualquer</option>
                            <option value="M">Masculino</option>
                            <option value="F">Feminino</option>
                            <option value="OUTRO">Outro</option>
                        </select>
                    </div>

                    <div class="col-12 frow">
                        <label class="fcheck">
                            <input id="fSomenteFoto" type="checkbox" />
                            Somente com foto
                        </label>

                        <label class="fcheck">
                            <input id="fSomenteVerificado" type="checkbox" />
                            Somente verificados
                        </label>
                    </div>

                    <div class="col-12">
                        <label class="flabel">Ordena√ß√£o</label>
                        <select id="fOrdenar" class="fselect">
                            <option value="recent">Recentes</option>
                            <option value="boost">Boost</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="fmodal-foot">
                <button id="btnLimparFiltros" class="btn btn-ghost">Limpar</button>
                <button id="btnSalvarPrefs" class="btn btn-ghost">Salvar</button>
                <button id="btnAplicarFiltros" class="btn btn-primary">Aplicar</button>
            </div>
        </div>
    </div>

    <!-- MODAL LIMITE DE CURTIDAS -->
    <div id="limiteCurtidasOverlay" class="overlay hidden">
        <div class="modal-limit">
            <div class="modal-icon">üíî</div>
            <h2>Limite di√°rio atingido</h2>
            <p>
                Voc√™ chegou ao limite de <b>10 curtidas por dia</b>.
                <br />
                Volte amanh√£ ou torne-se <b>Premium</b> para curtir sem limites.
            </p>

            <div class="modal-actions">
                <button id="btnFecharLimite" class="btn-secondary">Entendi</button>
                <button class="btn-primary" id="btnVirarPremium">Virar Premium</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden" role="status" aria-live="polite">
        <div id="toastText" class="toast-text"></div>
    </div>

    <script>
        // Drawer Mobile
        const navToggle = document.getElementById("navToggle");
        const navDrawer = document.getElementById("navDrawer");
        const navOverlay = document.getElementById("navOverlay");
        const navClose = document.getElementById("navClose");

        function openNav() {
            navDrawer.classList.add("open");
            navOverlay.classList.add("show");
            navToggle.classList.add("open");
            navToggle.setAttribute("aria-expanded", "true");
            navDrawer.setAttribute("aria-hidden", "false");
            navOverlay.setAttribute("aria-hidden", "false");
            document.body.classList.add("no-scroll");
        }

        function closeNav() {
            navDrawer.classList.remove("open");
            navOverlay.classList.remove("show");
            navToggle.classList.remove("open");
            navToggle.setAttribute("aria-expanded", "false");
            navDrawer.setAttribute("aria-hidden", "true");
            navOverlay.setAttribute("aria-hidden", "true");
            document.body.classList.remove("no-scroll");
        }

        navToggle?.addEventListener("click", () => {
            if (navDrawer.classList.contains("open")) closeNav();
            else openNav();
        });

        navOverlay?.addEventListener("click", closeNav);
        navClose?.addEventListener("click", closeNav);

        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeNav();
        });

        const btnSair = document.getElementById("btnSair");
        const btnSairMobile = document.getElementById("btnSairMobile");
        if (btnSair && btnSairMobile) {
            btnSairMobile.addEventListener("click", () => btnSair.click());
        }
    </script>
    <script>
        function getBrowserLang() {
            const lang = (navigator.languages && navigator.languages.length)
                ? navigator.languages[0]
                : navigator.language || "en";
            return lang.toLowerCase(); // ex: "pt-br", "en-us"
        }
    </script>
    <script type="module" src="js/feed.js"></script>
</body>

</html>