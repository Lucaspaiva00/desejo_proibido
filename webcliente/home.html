<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Feed</title>
    <link rel="stylesheet" href="css/dating.css" />
    <link rel="stylesheet" href="css/filtros.css" />
</head>

<body>
    <!-- TOPNAV: Desktop normal + Mobile com menu sandu√≠che -->
    <nav class="topnav" role="navigation" aria-label="Navega√ß√£o principal">
        <div class="brand">
            <div class="brand-badge">DP</div>
            <span class="brand-name">Desejo Proibido</span>
        </div>

        <!-- Desktop links -->
        <div class="navlinks navlinks-desktop" aria-label="Links do menu">
            <a href="home.html" class="active">Feed</a>
            <a href="perfil.html">Perfil</a>
            <a href="fotos.html">Fotos</a>
            <a href="matches.html">Matches</a>
            <a href="conversas.html">Chat</a>
        </div>

        <div class="spacer"></div>

        <!-- Bot√£o sair (sempre vis√≠vel) -->
        <button id="btnSair" class="btn btn-ghost">Sair</button>

        <!-- Bot√£o hamb√∫rguer (mobile) -->
        <button class="nav-toggle" id="navToggle" aria-label="Abrir menu" aria-expanded="false"
            aria-controls="navDrawer">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <!-- Overlay + Drawer Mobile -->
    <div class="nav-overlay" id="navOverlay" aria-hidden="true"></div>

    <aside class="nav-drawer" id="navDrawer" aria-hidden="true">
        <div class="nav-drawer-head">
            <div class="brand">
                <div class="brand-badge">DP</div>
                <span class="brand-name">Desejo Proibido</span>
            </div>

            <button class="iconbtn" id="navClose" aria-label="Fechar menu">
                <span class="xicon"></span>
            </button>
        </div>

        <div class="nav-drawer-links">
            <a href="home.html" class="active">Feed</a>
            <a href="perfil.html">Perfil</a>
            <a href="fotos.html">Fotos</a>
            <a href="matches.html">Matches</a>
            <a href="conversas.html">Chat</a>
        </div>

        <div class="nav-drawer-foot">
            <button id="btnSairMobile" class="btn btn-ghost w100">Sair</button>
        </div>
    </aside>

    <div class="wrap">
        <div class="feed-top">
            <div id="msg" class="msgline muted"></div>

            <!-- ‚úÖ FILTROS (MVP) -->
            <div class="panel filtros">
                <div class="filtros-head">
                    <div class="filtros-title">Filtros</div>
                    <div class="filtros-sub">(Cidade/Estado, Idade, G√™nero, Avan√ßados)</div>
                </div>

                <div class="filtros-grid">
                    <div class="col-12">
                        <input id="fQ" class="finput" placeholder="Buscar por nome ou bio..." />
                    </div>

                    <div class="col-6">
                        <input id="fCidade" class="finput" placeholder="Cidade (ex: Pedreira)" />
                    </div>

                    <div class="col-6">
                        <input id="fEstado" class="finput" placeholder="Estado (ex: SP)" />
                    </div>

                    <div class="col-3">
                        <input id="fIdadeMin" class="finput" type="number" min="18" max="99" placeholder="Idade m√≠n" />
                    </div>

                    <div class="col-3">
                        <input id="fIdadeMax" class="finput" type="number" min="18" max="99" placeholder="Idade m√°x" />
                    </div>

                    <div class="col-6">
                        <select id="fGenero" class="fselect">
                            <option value="QUALQUER">G√™nero: Qualquer</option>
                            <option value="M">G√™nero: Masculino</option>
                            <option value="F">G√™nero: Feminino</option>
                            <option value="OUTRO">G√™nero: Outro</option>
                        </select>
                    </div>

                    <div class="col-6 frow">
                        <label class="fcheck">
                            <input id="fSomenteFoto" type="checkbox" />
                            Somente com foto
                        </label>

                        <label class="fcheck">
                            <input id="fSomenteVerificado" type="checkbox" />
                            Somente verificados
                        </label>
                    </div>

                    <div class="col-6">
                        <select id="fOrdenar" class="fselect">
                            <option value="recent">Ordenar: Recentes</option>
                            <option value="boost">Ordenar: Boost</option>
                        </select>
                    </div>

                    <div class="col-12 factions">
                        <button id="btnLimparFiltros" class="btn btn-ghost">Limpar</button>
                        <button id="btnSalvarPrefs" class="btn btn-ghost">Salvar prefer√™ncias</button>
                        <button id="btnAplicarFiltros" class="btn btn-primary">Aplicar filtros</button>
                    </div>
                </div>
            </div>

            <!-- /FILTROS -->
        </div>

        <div class="feed-stage">
            <!-- Card Tinder -->
            <div class="tcard panel" id="tcard">
                <div id="card" class="tcard-inner"></div>

                <div class="tactions" aria-label="A√ß√µes do feed">
                    <button id="btnBloquear" class="tbtn tbtn-danger" title="Bloquear" aria-label="Bloquear">‚úñ</button>
                    <button id="btnPular" class="tbtn tbtn-ghost" title="Pular" aria-label="Pular">‚ü≤</button>
                    <button id="btnDenunciar" class="tbtn tbtn-warn" title="Denunciar" aria-label="Denunciar">‚öë</button>
                    <button id="btnCurtir" class="tbtn tbtn-like" title="Curtir" aria-label="Curtir">‚ù§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL LIMITE DE CURTIDAS -->
    <div id="limiteCurtidasOverlay" class="overlay hidden">
        <div class="modal-limit">
            <div class="modal-icon">üíî</div>
            <h2>Limite di√°rio atingido</h2>
            <p>
                Voc√™ chegou ao limite de <b>10 curtidas por dia</b>.
                <br />
                Volte amanh√£ ou torne-se <b>Premium</b> para curtir sem limites.
            </p>

            <div class="modal-actions">
                <button id="btnFecharLimite" class="btn-secondary">Entendi</button>
                <button class="btn-primary" id="btnVirarPremium">
                    Virar Premium
                </button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden" role="status" aria-live="polite">
        <div id="toastText" class="toast-text"></div>
    </div>

    <script>
        // Drawer Mobile (hamb√∫rguer) - padr√£o Tinder
        const navToggle = document.getElementById("navToggle");
        const navDrawer = document.getElementById("navDrawer");
        const navOverlay = document.getElementById("navOverlay");
        const navClose = document.getElementById("navClose");

        function openNav() {
            navDrawer.classList.add("open");
            navOverlay.classList.add("show");
            navToggle.classList.add("open");
            navToggle.setAttribute("aria-expanded", "true");
            navDrawer.setAttribute("aria-hidden", "false");
            navOverlay.setAttribute("aria-hidden", "false");
            document.body.classList.add("no-scroll");
        }

        function closeNav() {
            navDrawer.classList.remove("open");
            navOverlay.classList.remove("show");
            navToggle.classList.remove("open");
            navToggle.setAttribute("aria-expanded", "false");
            navDrawer.setAttribute("aria-hidden", "true");
            navOverlay.setAttribute("aria-hidden", "true");
            document.body.classList.remove("no-scroll");
        }

        navToggle?.addEventListener("click", () => {
            if (navDrawer.classList.contains("open")) closeNav();
            else openNav();
        });

        navOverlay?.addEventListener("click", closeNav);
        navClose?.addEventListener("click", closeNav);

        // Fecha com ESC
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeNav();
        });

        // Sair: desktop + drawer
        const btnSair = document.getElementById("btnSair");
        const btnSairMobile = document.getElementById("btnSairMobile");
        if (btnSair && btnSairMobile) {
            btnSairMobile.addEventListener("click", () => btnSair.click());
        }
    </script>

    <script type="module" src="js/feed.js"></script>
</body>

</html>